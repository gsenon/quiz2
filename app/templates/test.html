<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ - –í–æ–ø—Ä–æ—Å {{ question_num }}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="container test-container" 
         data-question-num="{{ question_num }}" 
         data-total-questions="{{ total_questions }}" 
         data-question-type="{{ question.type }}">
        
        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Ç–µ—Å—Ç–∞ -->
        <div class="test-header">
            <h1 class="test-title">–°–∏—Å—Ç–µ–º–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∑–Ω–∞–Ω–∏–π</h1>
            <div class="question-counter">–í–æ–ø—Ä–æ—Å {{ question_num }} –∏–∑ {{ total_questions }}</div>
        </div>

        <!-- –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä -->
        <div class="progress-section">
            <div class="progress-info">
                <span class="progress-text">–ü—Ä–æ–≥—Ä–µ—Å—Å –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è</span>
                <span class="progress-percent" id="progressPercent">0%</span>
            </div>
            <div class="progress-bar-container">
                <div class="progress-bar-fill" id="progressFill"></div>
            </div>
        </div>

        <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤–æ–ø—Ä–æ—Å–∞ -->
        <div class="question-element">
            <div class="question-header">
                <span class="question-badge">–í–æ–ø—Ä–æ—Å {{ question_num }}</span>
                <span class="question-level">–£—Ä–æ–≤–µ–Ω—å: {{ question.get('level', 'L1') }}</span>
            </div>
            <h2 class="question-text">{{ question.question }}</h2>
            
            <div class="question-meta">
                <span class="question-type">
                    {% if question.type == 'single_choice' %}
                        –í—ã–±–µ—Ä–∏—Ç–µ –æ–¥–∏–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç
                    {% else %}
                        –í—ã–±–µ—Ä–∏—Ç–µ –æ–¥–∏–Ω –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
                    {% endif %}
                </span>
                <span class="question-weight">–í–µ—Å –≤–æ–ø—Ä–æ—Å–∞: {{ question.get('weight', 1) }} –±–∞–ª–ª</span>
            </div>
        </div>

        <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –æ—Ç–≤–µ—Ç–∞ -->
        <div class="options-container">
            <form method="POST" action="{{ url_for('process_answer') }}" id="testForm">
                {% for option in question.options %}
                <div class="option-item" data-value="{{ option }}">
                    <label class="option-label">
                        {% if question.type == 'single_choice' %}
                            <input type="radio" name="answer" value="{{ option }}" class="option-input" required>
                        {% else %}
                            <input type="checkbox" name="answer" value="{{ option }}" class="option-input">
                        {% endif %}
                        <span class="option-marker"></span>
                        <span class="option-text">{{ option }}</span>
                    </label>
                </div>
                {% endfor %}
            </form>
        </div>

        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ -->
        <div class="navigation-section">
            <div class="navigation-buttons">
                {% if question_num > 1 %}
                <button type="button" class="nav-btn btn-prev" id="prevBtn">
                    ‚Üê –ù–∞–∑–∞–¥
                </button>
                {% else %}
                <div class="nav-btn-placeholder"></div>
                {% endif %}
                
                <button type="submit" form="testForm" class="nav-btn {% if question_num == total_questions %}btn-finish{% else %}btn-next{% endif %}" id="submitBtn">
                    {% if question_num == total_questions %} 
                        –ó–∞–≤–µ—Ä—à–∏—Ç—å —Ç–µ—Å—Ç
                    {% else %}
                        –°–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å
                    {% endif %}
                </button>
            </div>
        </div>

        <!-- –ü–∞–Ω–µ–ª—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ -->
        <div class="info-panel">
            <div class="info-section timer-section">
                <div class="info-label">
                    <span>‚è±Ô∏è –í—Ä–µ–º—è:</span>
                </div>
                <div class="timer-display" id="timeCounter">00:00</div>
            </div>
            
            <div class="info-section question-info">
                <div class="info-label">
                    <span>üìä –ü—Ä–æ–≥—Ä–µ—Å—Å:</span>
                </div>
                <div class="progress-stats">
                    <span>{{ question_num - 1 }}</span> / <span>{{ total_questions }}</span>
                </div>
            </div>
        </div>
    </div>

    <!-- –í–Ω–µ—à–Ω–∏–π JavaScript —Ñ–∞–π–ª -->
    <script src="{{ url_for('static', filename='js/test.js') }}"></script>
</body>
</html>