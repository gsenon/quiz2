<!DOCTYPE html>
<html>
<head>
    <title>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="container">
        <h1>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</h1>
        
        <div class="results-summary">
            <h2>–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º, {{ test_session.user_display_name }}!</h2>
            <div class="score-card {% if percent >= 70 %}success{% else %}warning{% endif %}">
                <h3>–í–∞—à —Ä–µ–∑—É–ª—å—Ç–∞—Ç: {{ score }}/{{ total }} ({{ "%.1f"|format(percent) }}%)</h3>
                <p>–£—Ä–æ–≤–µ–Ω—å: {{ test_session.level }}</p>
            </div>
        </div>

        <div class="results-actions">
            <a href="{{ url_for('download_pdf', session_id=test_session.id) }}" class="btn">
                üìÑ –°–∫–∞—á–∞—Ç—å PDF –æ—Ç—á–µ—Ç
            </a>
            <a href="/" class="btn">üè† –ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
        </div>

        <div class="detailed-results">
            <h3>–î–µ—Ç–∞–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:</h3>
            {% for i in range(answers|length) %}
            <div class="question-result {% if answers[i].is_correct %}correct{% else %}incorrect{% endif %}">
                <h4>–í–æ–ø—Ä–æ—Å {{ i+1 }}: {{ questions[i].question }}</h4>
                <p><strong>–í–∞—à –æ—Ç–≤–µ—Ç:</strong> 
                    {% if answers[i].user_answer is string %}
                        {{ answers[i].user_answer }}
                    {% else %}
                        {{ answers[i].user_answer | join(', ') }}
                    {% endif %}
                </p>
                <p><strong>–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç:</strong> 
                    {% if questions[i].correct is string %}
                        {{ questions[i].correct }}
                    {% else %}
                        {{ questions[i].correct | join(', ') }}
                    {% endif %}
                </p>
                <p><strong>–°—Ç–∞—Ç—É—Å:</strong> 
                    {% if answers[i].is_correct %}
                        ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ
                    {% else %}
                        ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
                    {% endif %}
                </p>
            </div>
            {% endfor %}
        </div>
    </div>
</body>
</html>