{% extends "base.html" %}
{% block title %}Настройки системы{% endblock %}
{% block content %}
<section class="card">
    <h1>Настройки системы</h1>
    
    <form method="post" action="{{ url_for('admin_settings_post') }}">
        <h2>Настройки аутентификации</h2>
        
        <div class="form-group">
            <label>
                <input type="checkbox" name="domain_auth_enabled" 
                       {{ 'checked' if settings.auth.domain_auth_enabled }}>
                Использовать доменную авторизацию для тестирования
            </label>
        </div>
        
        <div class="form-group">
            <label for="domain_name">Домен для авторизации:</label>
            <input type="text" id="domain_name" name="domain_name" 
                   value="{{ settings.auth.domain_name }}" required>
        </div>
        
        <h2>Настройки email</h2>
        
        <div class="form-group">
            <label>
                <input type="checkbox" name="email_enabled" 
                       {{ 'checked' if settings.email.enabled }}>
                Включить отправку email
            </label>
        </div>
        
        <div class="form-group">
            <label for="smtp_server">SMTP сервер:</label>
            <input type="text" id="smtp_server" name="smtp_server" 
                   value="{{ settings.email.smtp_server }}">
        </div>
        
        <div class="form-group">
            <label for="smtp_port">SMTP порт:</label>
            <input type="number" id="smtp_port" name="smtp_port" 
                   value="{{ settings.email.smtp_port }}">
        </div>
        
        <div class="form-group">
            <label for="smtp_username">SMTP пользователь:</label>
            <input type="text" id="smtp_username" name="smtp_username" 
                   value="{{ settings.email.smtp_username }}">
        </div>
        
        <div class="form-group">
            <label for="smtp_password">SMTP пароль:</label>
            <input type="password" id="smtp_password" name="smtp_password" 
                   value="{{ settings.email.smtp_password }}">
        </div>
        
        <div class="form-group">
            <label for="from_email">Email отправителя:</label>
            <input type="email" id="from_email" name="from_email" 
                   value="{{ settings.email.from_email }}">
        </div>
        
        <div class="form-group">
            <label for="admin_emails">Email администраторов (через запятую):</label>
            <input type="text" id="admin_emails" name="admin_emails" 
                   value="{{ settings.email.admin_emails | join(',') }}">
        </div>
        
        <div class="form-group">
            <label for="email_subject">Тема письма с результатами:</label>
            <input type="text" id="email_subject" name="email_subject" 
                   value="{{ settings.email.subject }}">
        </div>
        
        <div class="form-group">
            <label for="code_subject">Тема письма с кодом админки:</label>
            <input type="text" id="code_subject" name="code_subject" 
                   value="{{ settings.email.code_subject }}">
        </div>
        
        <button type="submit" class="btn">Сохранить настройки</button>
    </form>
</section>
{% endblock %}